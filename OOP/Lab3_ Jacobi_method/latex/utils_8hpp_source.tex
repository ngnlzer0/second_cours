\doxysection{utils.\+hpp}
\hypertarget{utils_8hpp_source}{}\label{utils_8hpp_source}\mbox{\hyperlink{utils_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ <vector>}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <chrono>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <string>}}
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ <algorithm>}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ <fstream>}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{00008\ }
\DoxyCodeLine{00009\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{long}\ \mbox{\hyperlink{utils_8hpp_a718b4eb2652c286f4d42dc18a8e71a1a}{ulong}};}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00021\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{utils_8hpp_a15f585496cb2ca69c3d95c906be2ac95}{solution\_find}}(\textcolor{keyword}{const}\ std::vector<double>\&\ row,\ \textcolor{keyword}{const}\ std::vector<double>\&\ solutions,\ \textcolor{keywordtype}{double}\ term,\ \textcolor{keyword}{const}\ \mbox{\hyperlink{utils_8hpp_a718b4eb2652c286f4d42dc18a8e71a1a}{ulong}}\ index)}
\DoxyCodeLine{00022\ \{}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#pragma\ simd}}
\DoxyCodeLine{00024\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ row.size();\ ++j)\ \{}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ term\ -\/=\ (solutions[j]\ *\ row[j]);}
\DoxyCodeLine{00026\ \ \ \ \ \}}
\DoxyCodeLine{00027\ \ \ \ \ \textcolor{keywordflow}{return}\ (term\ +\ (solutions[index]\ *\ row[index]))\ /\ row[index];}
\DoxyCodeLine{00028\ \}}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00035\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{utils_8hpp_a64f1dd7dc1aaab90b90bdb90ebc42ca0}{print\_solution}}(\textcolor{keyword}{const}\ std::vector<double>\&\ solution)\ \{}
\DoxyCodeLine{00036\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ solution.size();\ ++i)\ \{}
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}X["{}}\ <<\ i\ <<\ \textcolor{stringliteral}{"{}]\ =\ "{}}\ <<\ solution[i]\ <<\ std::endl;}
\DoxyCodeLine{00038\ \ \ \ \ \}}
\DoxyCodeLine{00039\ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00049\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00050\ T\ \mbox{\hyperlink{utils_8hpp_a99a742275128c4af76f858f620a2c791}{rand\_t}}(T\ min,\ T\ max)\ \{}
\DoxyCodeLine{00051\ \ \ \ \ T\ range\ =\ max\ -\/\ min;}
\DoxyCodeLine{00052\ \ \ \ \ T\ r\ =\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(rand())\ /\ \textcolor{keyword}{static\_cast<}T\textcolor{keyword}{>}(RAND\_MAX);}
\DoxyCodeLine{00053\ \ \ \ \ \textcolor{keywordflow}{return}\ r\ *\ range\ +\ min;}
\DoxyCodeLine{00054\ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00065\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00066\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{utils_8hpp_a5557d3c965525c4e54388249e73386da}{generate\_vector}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{utils_8hpp_a718b4eb2652c286f4d42dc18a8e71a1a}{ulong}}\ size,\ std::vector<T>\&\ v,\ \textcolor{keyword}{const}\ T\ min,\ \textcolor{keyword}{const}\ T\ max)\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{utils_8hpp_a718b4eb2652c286f4d42dc18a8e71a1a}{ulong}}\ i\ =\ 0;\ i\ <\ size;\ ++i)\ \{}
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ v.emplace\_back(\mbox{\hyperlink{utils_8hpp_a99a742275128c4af76f858f620a2c791}{rand\_t}}(min,\ max));}
\DoxyCodeLine{00069\ \ \ \ \ \}}
\DoxyCodeLine{00070\ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00081\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00082\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{utils_8hpp_accc35470b87347224f889934901eb1ff}{generate\_diagonal\_dominant\_matrix}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{utils_8hpp_a718b4eb2652c286f4d42dc18a8e71a1a}{ulong}}\ size,\ std::vector<std::vector<T>>\&\ matrix,}
\DoxyCodeLine{00083\ \ \ \ \ \textcolor{keyword}{const}\ T\ min,\ \textcolor{keyword}{const}\ T\ max)\ \{}
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{utils_8hpp_a718b4eb2652c286f4d42dc18a8e71a1a}{ulong}}\ i\ =\ 0;\ i\ <\ size;\ ++i)\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ std::vector<T>\ row;}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{utils_8hpp_a5557d3c965525c4e54388249e73386da}{generate\_vector}}(size,\ row,\ min,\ max);}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ matrix.emplace\_back(row);}
\DoxyCodeLine{00088\ \ \ \ \ \}}
\DoxyCodeLine{00089\ }
\DoxyCodeLine{00090\ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{utils_8hpp_a718b4eb2652c286f4d42dc18a8e71a1a}{ulong}}\ i\ =\ 0;\ i\ <\ size;\ ++i)\ \{}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ T\ sum\ =\ T(0);}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ val\ :\ matrix[i])\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ sum\ +=\ std::abs(val);}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ sum\ -\/=\ std::abs(matrix[i][i]);}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ matrix[i][i]\ =\ std::abs(matrix[i][i])\ +\ sum;\ \textcolor{comment}{//\ ensure\ diagonal\ dominance}}
\DoxyCodeLine{00097\ \ \ \ \ \}}
\DoxyCodeLine{00098\ \}}
\DoxyCodeLine{00099\ }
\DoxyCodeLine{00109\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00110\ T\ \mbox{\hyperlink{utils_8hpp_a72fabafd109c9be37b23f45ff4d5ea2a}{check\_error}}(\textcolor{keyword}{const}\ std::vector<std::vector<T>>\&\ matrix,\ \textcolor{keyword}{const}\ std::vector<T>\&\ terms,\ \textcolor{keyword}{const}\ std::vector<T>\&\ solution)\ \{}
\DoxyCodeLine{00111\ \ \ \ \ T\ error\ =\ T(0);}
\DoxyCodeLine{00112\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ matrix.size();\ ++i)\ \{}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ T\ diff\ =\ terms[i];}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ j\ =\ 0;\ j\ <\ matrix[i].size();\ ++j)\ \{}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ diff\ -\/=\ matrix[i][j]\ *\ solution[j];\ \textcolor{comment}{//\ compute\ Ax\ -\/\ b}}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ error\ +=\ std::abs(diff);}
\DoxyCodeLine{00118\ \ \ \ \ \}}
\DoxyCodeLine{00119\ \ \ \ \ \textcolor{keywordflow}{return}\ error;}
\DoxyCodeLine{00120\ \}}
\DoxyCodeLine{00121\ }

\end{DoxyCode}
